<!doctype html><html prefix="og: http://ogp.me/ns#" lang=en><head><meta charset=utf-8><meta name=language content="English"><meta property="og:locale" content="en"><link rel=alternate hreflang=en href=https://diazvictor.github.io/en/post/primeros-pasos-con-lgi/ title=English><link rel=alternate hreflang=es href=https://diazvictor.github.io/post/primeros-pasos-con-lgi/ title=Spanish><title>Getting started with LGI</title><meta name=application-name content="Getting started with LGI"><meta property="og:title" content="Getting started with LGI"><meta property="og:site_name" content="Getting started with LGI"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="In this tutorial I will show you how to build an interface with lua and gtk using the LGI library."><meta property="og:description" content="In this tutorial I will show you how to build an interface with lua and gtk using the LGI library."><meta name=keywords content="lua,gtk,lgi"><base href=https://diazvictor.github.io/en/post/primeros-pasos-con-lgi/><meta name=url content="https://diazvictor.github.io/en/post/primeros-pasos-con-lgi/"><link rel=canonical href=https://diazvictor.github.io/en/post/primeros-pasos-con-lgi/><meta property="og:type" content="article"><meta property="og:url" content="https://diazvictor.github.io/en/post/primeros-pasos-con-lgi/"><link rel="shortcut icon" href=https://diazvictor.github.io/images/favicon.png type=image/x-icon><link rel=stylesheet href=https://diazvictor.github.io/css/bulma.min.css><link rel=stylesheet href=https://diazvictor.github.io/css/custom.css><link rel=stylesheet href=https://diazvictor.github.io/css/custom-dark.css><link rel=stylesheet href=https://diazvictor.github.io/css/all.min.css><meta property="og:image" content="https://diazvictor.github.io/images/favicon.png"><meta property="article:section" content="Desarrollo"><meta property="article:published_time" content="2021-01-21 23:57:10 -0400 -0400"><meta property="og:article:author" content="Víctor díaz"><meta property="article:author" content="Víctor díaz"><meta name=author content="Víctor díaz"><script defer type=application/ld+json>{"@context":"http://schema.org","@type":"Article","headline":"Getting started with LGI - Víctor Díaz - Web Developer and Lua Lover","author":{"@type":"Person","name":"Víctor Díaz"},"datePublished":"2021-01-21","description":"In this tutorial I will show you how to build an interface with lua and gtk using the LGI library.","wordCount":575,"mainEntityOfPage":"True","dateModified":"2021-01-21","image":{"@type":"imageObject","url":""},"publisher":{"@type":"Organization","name":"Víctor Díaz - Web Developer and Lua Lover","logo":{"@type":"imageObject","url":"https:\/\/diazvictor.github.io\/images/favicon.ico"}}}</script></head><body id=top><header class="hero is-info is-fullheight"><div class=hero-head><nav class="navbar is-transparent"><div class=container><div class=navbar-brand><a href=/en class="navbar-item is-size-3 is-uppercase">Víctor Díaz</a><div class=navbar-item><a id=toggle-theme class="button is-info is-rounded is-hovered is-medium" title="Dark mode"><span class=icon><i class="fas fa-moon"></i></span></a></div><span class="navbar-burger burger" data-target=navbarMenuHeroB><span></span><span></span><span></span></span></div><div class=navbar-menu><div class=navbar-end><a href=https://diazvictor.github.io/en/post class=navbar-item>BLOG</a>
<a href=https://diazvictor.github.io/en/about class=navbar-item>ABOUT</a><div class="navbar-item has-dropdown is-hoverable"><a class="navbar-link has-text-white">TRANSLATIONS</a><div class="navbar-dropdown is-boxed is-uppercase"><a href=https://diazvictor.github.io/post/primeros-pasos-con-lgi/ class=navbar-item>es</a></div></div></div></div></div></nav></div><div class=hero-body><div class=container><h1 class="title is-1">Getting started with LGI</h1><div class=subtitle><i class="fas fa-calendar"></i>&nbsp;21 January, 2021&nbsp;&nbsp;&nbsp;
<i class="fas fa-clock"></i>&nbsp;3 minute read</div><div class=tags><a href=https://diazvictor.github.io/en/tags/lua/ class="tag is-light">lua</a>
<a href=https://diazvictor.github.io/en/tags/gtk/ class="tag is-light">gtk</a>
<a href=https://diazvictor.github.io/en/tags/lgi/ class="tag is-light">lgi</a>
<a href=https://diazvictor.github.io/en/tags/tutorial/ class="tag is-light">tutorial</a></div><p>In this tutorial I will show you how to build an interface with lua and gtk using the LGI library.</p></div></div></header><div id=content><div class=columns><div class="column is-8"><section class=section><article><div class=content><h2 id=how-to-get-started>How to get started</h2><p>More than a tutorial, this is the simplest example of how to create an empty
window. Then, we will extend the script to add a button to it that performs a
certain action.</p><p>Before we start, I recommend the following documents so that we can learn a
little more about LGI:</p><ul><li><a href=https://github.com/pavouk/lgi/blob/master/docs/overview.md>https://github.com/pavouk/lgi/blob/master/docs/overview.md</a></li><li><a href=https://github.com/pavouk/lgi/blob/master/docs/guide.md>https://github.com/pavouk/lgi/blob/master/docs/guide.md</a></li><li><a href=https://github.com/pavouk/lgi/blob/master/docs/gtk.md>https://github.com/pavouk/lgi/blob/master/docs/gtk.md</a></li></ul><p>You can install lgi using LuaRocks:</p><pre><code>luarocks install lgi
</code></pre><p>Or with your distro&rsquo;s package manager (if available).</p><h2 id=simple-example>Simple Example</h2><p>To begin our tutorial we will create the simplest example possible.
This program will create an empty window of <code>200x200</code> pixels.</p><p><img src=/images/post/primeros-pasos-con-lua-gtk/screen1.jpg alt=simple-window.lua></p><p>First we will create a file named <code>sample-window.lua</code>
with the following code:</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=kd>local</span> <span class=n>lgi</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;lgi&#34;</span><span class=p>)</span>
<span class=kd>local</span> <span class=n>Gtk</span> <span class=o>=</span> <span class=n>lgi.require</span><span class=p>(</span><span class=s2>&#34;Gtk&#34;</span><span class=p>,</span> <span class=s2>&#34;3.0&#34;</span><span class=p>)</span>

<span class=kd>local</span> <span class=n>window</span> <span class=o>=</span> <span class=n>Gtk.Window</span> <span class=p>{</span>
	<span class=n>title</span> <span class=o>=</span> <span class=s2>&#34;Sample - Window&#34;</span><span class=p>,</span>
	<span class=n>width</span> <span class=o>=</span> <span class=mi>200</span><span class=p>,</span>
	<span class=n>height</span> <span class=o>=</span> <span class=mi>200</span><span class=p>,</span>
	<span class=n>window_position</span> <span class=o>=</span> <span class=n>Gtk.WindowPosition</span><span class=p>.</span><span class=n>CENTER</span><span class=p>,</span>
	<span class=n>on_destroy</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
		<span class=n>Gtk.main_quit</span><span class=p>()</span>
	<span class=kr>end</span>
<span class=p>}</span>

<span class=n>window</span><span class=p>:</span><span class=n>show_all</span><span class=p>()</span>
<span class=n>Gtk.main</span><span class=p>()</span>
</code></pre></div><p>Each line of the example is explained in detail below.</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=kd>local</span> <span class=n>lgi</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s1>&#39;lgi&#39;</span><span class=p>)</span>
<span class=kd>local</span> <span class=n>Gtk</span> <span class=o>=</span> <span class=n>lgi.require</span><span class=p>(</span><span class=s1>&#39;Gtk&#39;</span><span class=p>,</span> <span class=s1>&#39;3.0&#39;</span><span class=p>)</span>
</code></pre></div><p>To have <strong>GTK+</strong> classes and functions available, it is necessary to first load
the <strong>LGI</strong> library and then the <strong>GTK+</strong> module. <strong>LGI</strong> library and then the
<strong>Gtk</strong> module. Since a user&rsquo;s system may have several versions of <strong>GTK+</strong>
installed at the same time, we want to make sure that when we load <strong>Gtk</strong> we
mean <strong>GTK 3</strong> and not any other version of the library, which is the purpose
of the <code>lgi.require("Gtk", "3.0")</code> statement.</p><p>The next line creates an empty window with a title, a size of <code>200x200</code>,
we center the window in the middle of the screen and connect the window to the
<code>destroy</code> event (which happens when we destroy the window or close it) to make
sure that the application is terminated if we click on the <code>X</code> of the window.</p><p>It should be clarified that with <strong>LGI</strong> the signals are
connected with <em>on</em>_.</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=n>window</span> <span class=o>=</span> <span class=n>Gtk.Window</span> <span class=p>{</span>
	<span class=n>title</span> <span class=o>=</span> <span class=s2>&#34;Sample - Window&#34;</span><span class=p>,</span> <span class=c1>-- title</span>
	<span class=n>width</span> <span class=o>=</span> <span class=mi>200</span><span class=p>,</span> <span class=c1>-- ancho</span>
	<span class=n>height</span> <span class=o>=</span> <span class=mi>200</span><span class=p>,</span> <span class=c1>-- alto</span>
	<span class=n>window_position</span> <span class=o>=</span> <span class=n>Gtk.WindowPosition</span><span class=p>.</span><span class=n>CENTER</span><span class=p>,</span> <span class=c1>-- position</span>
	<span class=n>on_destroy</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span> <span class=c1>-- event</span>
		<span class=n>Gtk.main_quit</span><span class=p>()</span>
	<span class=kr>end</span>
<span class=p>}</span>
</code></pre></div><p>In the next step we show the window.</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=n>window</span><span class=p>:</span><span class=n>show_all</span><span class=p>()</span>
</code></pre></div><p>Finally, we start the <strong>GTK+</strong> processing loop, from which we will exit
when the window is closed (see line 15).</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=n>Gtk.main</span><span class=p>()</span>
</code></pre></div><p>To run the program, open a terminal, change to the directory of the file, and
enter the command:</p><div class=highlight><pre class=chroma><code class=language-sh data-lang=sh>lua sample-window.lua
</code></pre></div><h2 id=extended-example>Extended Example</h2><p>For something a little more useful, here&rsquo;s the <strong>LGI</strong> version of the classic
program <em>Hello World</em>.</p><p><img src=/images/post/primeros-pasos-con-lua-gtk/screen2.jpg alt=hello-world.lua></p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=kd>local</span> <span class=n>lgi</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s2>&#34;lgi&#34;</span><span class=p>)</span>
<span class=kd>local</span> <span class=n>Gtk</span> <span class=o>=</span> <span class=n>lgi.require</span><span class=p>(</span><span class=s2>&#34;Gtk&#34;</span><span class=p>,</span> <span class=s2>&#34;3.0&#34;</span><span class=p>)</span>
<span class=kd>local</span> <span class=n>MyWindow</span> <span class=o>=</span> <span class=n>Gtk.Window</span><span class=p>:</span><span class=n>derive</span><span class=p>(</span><span class=s2>&#34;MyWindow&#34;</span><span class=p>)</span>

<span class=kr>function</span> <span class=nc>MyWindow</span><span class=p>:</span><span class=nf>_init</span><span class=p>()</span>
	<span class=n>self.title</span> <span class=o>=</span> <span class=s2>&#34;Hello World&#34;</span>

	<span class=kd>local</span> <span class=n>button</span> <span class=o>=</span> <span class=n>Gtk.Button</span><span class=p>({</span> <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;Click Here&#34;</span> <span class=p>})</span>
	<span class=kr>function</span> <span class=nc>button</span><span class=p>:</span><span class=nf>on_clicked</span><span class=p>()</span>
		<span class=n>print</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>)</span>
	<span class=kr>end</span>
	<span class=n>self</span><span class=p>:</span><span class=n>add</span><span class=p>(</span><span class=n>button</span><span class=p>)</span>
<span class=kr>end</span>

<span class=kd>local</span> <span class=n>window</span> <span class=o>=</span> <span class=n>MyWindow</span><span class=p>()</span>
<span class=n>window.on_destroy</span> <span class=o>=</span> <span class=n>Gtk.main_quit</span>
<span class=n>window</span><span class=p>:</span><span class=n>show_all</span><span class=p>()</span>

<span class=n>Gtk.main</span><span class=p>()</span>
</code></pre></div><p>Unlike the simple example, here we create a subclass of <code>Gtk.Window</code> to
define our own <code>MyWindow</code> class.</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=kd>local</span> <span class=n>MyWindow</span> <span class=o>=</span> <span class=n>Gtk.Window</span><span class=p>:</span><span class=n>derive</span><span class=p>(</span><span class=s2>&#34;MyWindow&#34;</span><span class=p>)</span>
</code></pre></div><p>In the constructor of the class, we will tell it to give the value of
<code>Hello World</code> to the <code>title</code> property.</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=n>self.title</span> <span class=o>=</span> <span class=s2>&#34;Hello World&#34;</span>
</code></pre></div><p>The next five lines are used to create a button
(<em><a href=http://es.wikipedia.org/wiki/Widget>widget</a></em>), connect it to its
<code>clicked</code> signal, and add it as a child to the window.</p><div class=highlight><pre class=chroma><code class=language-lua data-lang=lua><span class=kd>local</span> <span class=n>button</span> <span class=o>=</span> <span class=n>Gtk.Button</span><span class=p>({</span> <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;Click Here&#34;</span> <span class=p>})</span>
<span class=kr>function</span> <span class=nc>button</span><span class=p>:</span><span class=nf>on_clicked</span><span class=p>()</span>
	<span class=n>print</span><span class=p>(</span><span class=s2>&#34;Hello World&#34;</span><span class=p>)</span>
<span class=kr>end</span>
<span class=n>self</span><span class=p>:</span><span class=n>add</span><span class=p>(</span><span class=n>button</span><span class=p>)</span>
</code></pre></div><p>The last block, outside the class, is very similar to the simple example above,
but instead of creating an instance of the generic <code>Gtk.Window</code> class,
we create an instance of <code>MyWindow</code>.</p></div></article><hr><nav class=bd-prev-next-bis><a class=bd-prev-next-bis-previous href=https://diazvictor.github.io/en/post/agregando-estilos-css-con-lgi/ title="Adding css styles with LGI">← Adding css styles with LGI</a>
<a class=bd-prev-next-bis-next href=https://diazvictor.github.io/en/post/como-usar-mosquitto-desde-la-terminal/ title="How to use mosquitto from the terminal">How to use mosquitto from the terminal →</a></nav></section><div class="section comments"><div id=disqus_thread></div><script>(function(){var d=document,s=d.createElement('script');s.src='https://diazvictor.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div><div class="column is-4"><div class="section sidebar"><div class=widget><h1 class="title is-4">ABOUT ME</h1><p>I am a young man passionate about
programming, with more than 5 years of experience as a web
developer and designer.</p></div><div class=widget><h1 class="title is-4">LATEST POSTS</h1><ul><li><a href=/en/post/agregando-estilos-css-con-lgi/><b>Adding css styles with LGI</b></a></li><li><time>9 February, 2021</time></li><div class=has-margin-10 style=margin-bottom:10px></div><li><a href=/en/post/primeros-pasos-con-lgi/><b>Getting started with LGI</b></a></li><li><time>21 January, 2021</time></li><div class=has-margin-10 style=margin-bottom:10px></div><li><a href=/en/post/como-usar-mosquitto-desde-la-terminal/><b>How to use mosquitto from the terminal</b></a></li><li><time>2 May, 2020</time></li><div class=has-margin-10 style=margin-bottom:10px></div><li><a href=/en/post/manual-basico-lua/><b>Manual Basico Sobre Lua</b></a></li><li><time>24 April, 2020</time></li><div class=has-margin-10 style=margin-bottom:10px></div></ul></div><div class=widget><h1 class="title is-4">CATEGORIES</h1><div class="field is-grouped is-grouped-multiline"><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/categories/desarrollo/ class="tag is-light" style=text-transform:uppercase>desarrollo</a></div></div></div></div><div class=widget><h1 class="title is-4">TAGS</h1><div class="field is-grouped is-grouped-multiline"><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/css/ class="tag is-light">css</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/gtk/ class="tag is-light">gtk</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/lgi/ class="tag is-light">lgi</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/lua/ class="tag is-light">lua</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/manual/ class="tag is-light">manual</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/mosquitto/ class="tag is-light">mosquitto</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/mqtt/ class="tag is-light">mqtt</a></div></div><div class=control><div class="tags has-addons"><a href=https://diazvictor.github.io/en/tags/tutorial/ class="tag is-light">tutorial</a></div></div></div></div></div></div></div></div><footer class="footer has-background-info"><div class="content has-text-white"><div class=buttons><a href=https://github.com/diazvictor target=_blank><i class="fab fa-github-alt fa-2x"></i></a><a href=https://t.me/diazvictor target=_blank><i class="fab fa-telegram fa-2x"></i></a><a href=https://mas.to/@diazvictor target=_blank><i class="fab fa-mastodon fa-2x"></i></a><a href=mailto:diazvictor@tutamail.com target=_blank><i class="fas fa-envelope fa-2x"></i></a><a href=https://gitlab.com/diazvictor target=_blank><i class="fab fa-gitlab fa-2x"></i></a></div><p class=has-text-centered style=margin-bottom:10px!important>© 2021 diazvictor</p><p class=has-text-centered>Powered by <a href=https://gohugo.io/ target=_blank class=has-text-white><u>Hugo</u></a> | Theme is <a href=http://diazvictor.github.io/blue-ocean/ target=_blank class=has-text-white><u>Blue Ocean</u></a></p><div class=buttons><a href=#top class=has-text-centered><i class="fas fa-chevron-up"></i></a></div></div></footer><script type=text/javascript src=https://diazvictor.github.io/js/nav-burger.js></script><script type=text/javascript src=https://diazvictor.github.io/js/toggle-theme.js></script><script type=text/javascript src=https://diazvictor.github.io/js/searchbox.js></script></body></html>